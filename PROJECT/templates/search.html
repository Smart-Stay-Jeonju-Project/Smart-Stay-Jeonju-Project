{% extends "layout.html" %}

{% block title %}검색결과 페이지{% endblock %}

{% if search_type == 'keyword' %}
    <strong>선택하신 키워드 :</strong>
    <ul>
        {% for keyword in selected_keywords %}
        <li>{{ keyword }}</li>
        {% endfor %}
    </ul>
    <ul id="keywordUl">
        {% for keyword in keyword_list %}
        <li><a href="{{ url_for('main.search') }}?search_type=keyword&search_term={{ keyword }}">{{ keyword }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <strong>키워드를 선택하세요 :</strong>
    <ul>
        {% for keyword in keyword_list %}
        <li><a href="{{ url_for('main.search') }}?search_type=keyword&search_term={{ keyword }}">{{ keyword }}</a></li>
        {% endfor %}
    </ul>
{% endif %}
{% block contents %}
    <!-- Flask에서 넘어온 데이터를 전역 변수로 선언 -->
    <!-- 데이터는 잘 넘어와서 빨간줄 무시 -->
    <script>
        //window.accommodations = {{ accommodations | tojson | safe }};
        // accom_list js에 전달
        // window : 브라우저 전역 객체
        var accom_list = {{ accom_list | tojson | safe }};
        // console.log(window.allKeywords)
    </script>
    <!-- main.js에서 지도 정보 가져오기 -->
    <script src="{{ url_for('static', filename='js/search_maps.js') }}"></script>
    <!-- Maps API 불러오기 -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDg8UOceSAXDR2NnMikougMamOyAxbdRac&callback=initMap"
        async defer>
    </script>
    <script>
        const searchTerm = "{{ search_term }}";  // Flask에서 넘긴 검색어를 JS 변수로 사용
    </script>
    <p>{{ result }}</p>
    <!-- 지도 -->
    <div id="map-wrapper">
        <div id="map" ></div>
        <div id="list-panel">
            <div id="accommodation-list"></div> 
    </div>
{% endblock %}